[{"authors":null,"categories":["English"],"content":"eurolig provides a toolkit to easily retrieve and analyze basketball generated data for the Euroleague. The package is mainly designed to work with two types of data: play-by-play data and shot location data. Although Euroleague’s first season was in 2000, play-by-play and shot location data is only available since the 2007/2008 season. This post introduces the latest realease of the package (v0.4.0) and shows how it could be used to do some basic analyses.\nChanges in the new version If you already used or knew about eurolig from an earlier post, you will notice quite some changes and added functionality. The previous (and first) version (0.0.0.900) of eurolig was very raw and experimental. In the new version (0.4.0) I haved added much more functionality and provided basic documentation.\nThe most important changes are:\n camelCase for function names (instead of snake_case).\n Removed the plot_heatmap() functionality that produced assist pattern heatmaps.\n Output play-by-play data frames contain different variables.\n  Although there are a lot of changes, I did not keep old functions in the release because I think not many people are using the package. Old code will probably not work with the new realease. Note however that adapting old code to the new version will most likely be straight forward.\n Required packages You will need to install the eurolig package from its GitHub repository:\n# install.packages(\u0026quot;devtools\u0026quot;) devtools::install_github(\u0026quot;solmos/eurolig\u0026quot;) In addition to eurolig, the following packages are needed to reproduce this post:\nlibrary(eurolig) library(dplyr) library(ggplot2)  Getting data Datasets Several datasets are included in the package. You can see all the available datasets by calling:\ndata(package = \u0026quot;eurolig\u0026quot;) Sample datasets of play-by-play and shot location data are stored in samplepbp and sampleshots, respectively.\nA particularly useful dataset in the package is gameresults. It contains all game results in the Euroleague from the 2001/2002 season to the 2018/2019 season. As you will see in the next section, this dataset can be useful to find the games you want to get data from.\nFinally, if we need to find the name or identifying code of teams, the teaminfo dataset can be helpful.\n extract functions Functions that retrieve data from Euroleague’s website API start with the verb extract. You will need to be online for these functions to work.\nThe main functions to get data are:\n extractPbp() for play-by-play data.\n extractShots() for shot location data.\n  These functions can only retrieve data from a single game. That means that if you want to get data for several games you will need to iterate the function over the games of interest. Note, however, that Euroleague’s robot.txt asks for a 15 (!) seconds delay between requests. Take this into consideration when requesting data for a lot of games.\nGames are uniquely identified by a combination of season and game code. In order to indicate the extract functions what game we want to get data from, we need to pass the corresponding game code and season as arguments.\nLet’s find the highest scoring games from the 2018/2019 season in the gameresults dataset:\ngames \u0026lt;- gameresults %\u0026gt;% filter(season == 2018) %\u0026gt;% mutate(total_points = points_home + points_away) %\u0026gt;% arrange(desc(total_points)) head(games) ## # A tibble: 6 x 14 ## season phase round_name team_home points_home team_away points_away ## \u0026lt;int\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;int\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;int\u0026gt; ## 1 2018 RS Round 21 Herbalif… 104 AX Arman… 106 ## 2 2018 RS Round 16 AX Arman… 111 Buducnos… 94 ## 3 2018 RS Round 1 Real Mad… 109 Darussaf… 93 ## 4 2018 RS Round 4 Herbalif… 91 CSKA Mos… 106 ## 5 2018 RS Round 8 CSKA Mos… 99 Zalgiris… 97 ## 6 2018 RS Round 25 CSKA Mos… 101 AX Arman… 95 ## # … with 7 more variables: game_code \u0026lt;int\u0026gt;, date \u0026lt;chr\u0026gt;, round_code \u0026lt;int\u0026gt;, ## # game_url \u0026lt;chr\u0026gt;, team_code_home \u0026lt;chr\u0026gt;, team_code_away \u0026lt;chr\u0026gt;, ## # total_points \u0026lt;int\u0026gt; We can see that last season’s highest scoring game was the Herbalife Gran Canaria vs. AX Armani Exchange Olimpia Milan with 210 total points scored between the two teams. The identifying game code and season for this game are\ngames$season[1] ## [1] 2018 games$game_code[1] ## [1] 168 We can get play-by-play and shot location data for this game by passing these values as arguments to extractShots() and extractPbp():\ngame_shots \u0026lt;- extractShots(game_code = 168, season = 2018) game_pbp \u0026lt;- extractPbp(168, 2018) If you want to find games for the current season (not included in the gameresults dataset), you have two options: either look up the game code in the game’s url or use extractResults().\n  Analyzing play-by-play data Play-by-play data provides a lot of information that traditional boxscore statistics fail to communicate. In the following subsections I am going to show how we can find the following information from play-by-play data:\n Plus-Minus for one or more players.\n On/Off statistics for one or more players.\n Assists patterns within a team\n  For these analyses I am going to use the sample dataset samplepbp which contains the play-by-play data for all four games of the 2018/2019 Euroleague Final Four:\ndata(\u0026quot;samplepbp\u0026quot;) glimpse(samplepbp) ## Observations: 2,121 ## Variables: 29 ## $ season \u0026lt;int\u0026gt; 2018, 2018, 2018, 2018, 2018, 2018, 2018, 2018, 2… ## $ game_code \u0026lt;int\u0026gt; 257, 257, 257, 257, 257, 257, 257, 257, 257, 257,… ## $ play_number \u0026lt;int\u0026gt; 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 1… ## $ team_code \u0026lt;chr\u0026gt; NA, \u0026quot;ULK\u0026quot;, \u0026quot;IST\u0026quot;, \u0026quot;ULK\u0026quot;, \u0026quot;IST\u0026quot;, \u0026quot;IST\u0026quot;, \u0026quot;ULK\u0026quot;, \u0026quot;IS… ## $ player_name \u0026lt;chr\u0026gt; NA, \u0026quot;DUVERIOGLU, AHMET\u0026quot;, \u0026quot;DUNSTON, BRYANT\u0026quot;, \u0026quot;MUHA… ## $ play_type \u0026lt;chr\u0026gt; \u0026quot;BP\u0026quot;, \u0026quot;TPOFF\u0026quot;, \u0026quot;TPOFF\u0026quot;, \u0026quot;2FGM\u0026quot;, \u0026quot;2FGA\u0026quot;, \u0026quot;RBLK\u0026quot;, \u0026quot;… ## $ time_remaining \u0026lt;chr\u0026gt; \u0026quot;10:00\u0026quot;, \u0026quot;09:59\u0026quot;, \u0026quot;09:59\u0026quot;, \u0026quot;09:42\u0026quot;, \u0026quot;09:19\u0026quot;, \u0026quot;09:… ## $ quarter \u0026lt;dbl\u0026gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… ## $ points_home \u0026lt;dbl\u0026gt; 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 5, 5, 5, 5, 5, 5… ## $ points_away \u0026lt;dbl\u0026gt; 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 2… ## $ play_info \u0026lt;chr\u0026gt; \u0026quot;Begin Period\u0026quot;, \u0026quot;\u0026quot;, \u0026quot;\u0026quot;, \u0026quot;Two Pointer (1/1 - 2 pt… ## $ seconds \u0026lt;dbl\u0026gt; 0, 1, 1, 18, 41, 41, 44, 45, 47, 56, 56, 67, 68, … ## $ home_team \u0026lt;chr\u0026gt; \u0026quot;Fenerbahce Beko Istanbul\u0026quot;, \u0026quot;Fenerbahce Beko Ista… ## $ away_team \u0026lt;chr\u0026gt; \u0026quot;Anadolu Efes Istanbul\u0026quot;, \u0026quot;Anadolu Efes Istanbul\u0026quot;,… ## $ home \u0026lt;lgl\u0026gt; NA, TRUE, FALSE, TRUE, FALSE, FALSE, TRUE, FALSE,… ## $ team_name \u0026lt;chr\u0026gt; NA, \u0026quot;Fenerbahce Beko Istanbul\u0026quot;, \u0026quot;Anadolu Efes Ist… ## $ last_ft \u0026lt;lgl\u0026gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, … ## $ and1 \u0026lt;lgl\u0026gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, … ## $ home_player1 \u0026lt;chr\u0026gt; \u0026quot;GREEN, ERICK\u0026quot;, \u0026quot;GREEN, ERICK\u0026quot;, \u0026quot;GREEN, ERICK\u0026quot;, \u0026quot;… ## $ home_player2 \u0026lt;chr\u0026gt; \u0026quot;MELLI, NICOLO\u0026quot;, \u0026quot;MELLI, NICOLO\u0026quot;, \u0026quot;MELLI, NICOLO\u0026quot;… ## $ home_player3 \u0026lt;chr\u0026gt; \u0026quot;GUDURIC, MARKO\u0026quot;, \u0026quot;GUDURIC, MARKO\u0026quot;, \u0026quot;GUDURIC, MAR… ## $ home_player4 \u0026lt;chr\u0026gt; \u0026quot;MUHAMMED, ALI\u0026quot;, \u0026quot;MUHAMMED, ALI\u0026quot;, \u0026quot;MUHAMMED, ALI\u0026quot;… ## $ home_player5 \u0026lt;chr\u0026gt; \u0026quot;DUVERIOGLU, AHMET\u0026quot;, \u0026quot;DUVERIOGLU, AHMET\u0026quot;, \u0026quot;DUVERI… ## $ away_player1 \u0026lt;chr\u0026gt; \u0026quot;LARKIN, SHANE\u0026quot;, \u0026quot;LARKIN, SHANE\u0026quot;, \u0026quot;LARKIN, SHANE\u0026quot;… ## $ away_player2 \u0026lt;chr\u0026gt; \u0026quot;MOERMAN, ADRIEN\u0026quot;, \u0026quot;MOERMAN, ADRIEN\u0026quot;, \u0026quot;MOERMAN, A… ## $ away_player3 \u0026lt;chr\u0026gt; \u0026quot;MICIC, VASILIJE\u0026quot;, \u0026quot;MICIC, VASILIJE\u0026quot;, \u0026quot;MICIC, VAS… ## $ away_player4 \u0026lt;chr\u0026gt; \u0026quot;DUNSTON, BRYANT\u0026quot;, \u0026quot;DUNSTON, BRYANT\u0026quot;, \u0026quot;DUNSTON, B… ## $ away_player5 \u0026lt;chr\u0026gt; \u0026quot;SIMON, KRUNOSLAV\u0026quot;, \u0026quot;SIMON, KRUNOSLAV\u0026quot;, \u0026quot;SIMON, K… ## $ lineups \u0026lt;chr\u0026gt; \u0026quot;GREEN, ERICK - MELLI, NICOLO - GUDURIC, MARKO - … Plus-Minus Plus-minus (+/-) measures the difference in team points scored and team points allowed while a player or a set of players of the same team are on the court. getPlusMinus() parses a play-by-play data frame with one or more games and returns the indicated player/s plus-minus statistic in each game.\nAlthough widely used nowadays, it is important to note that raw plus-minus is very unstable and totally context dependent. It is, however, the building block for other more advanced stats such as RAPM or RPM.\nLet’s check what Sergio Rodriguez (aka El Chacho) plus-minus was in the two Final Four games that he played in the 2018/2019 season:\nchacho_pm \u0026lt;- getPlusMinus(pbp = samplepbp, players = \u0026quot;RODRIGUEZ, SERGIO\u0026quot;) # Select only a few columns so that data frame fits in the document chacho_pm %\u0026gt;% select(game_code, team_code_opp, poss, poss_opp, plus_minus) ## # A tibble: 2 x 5 ## game_code team_code_opp poss poss_opp plus_minus ## \u0026lt;int\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt; ## 1 258 MAD 44 42 8 ## 2 260 IST 24 25 -10 Note that you can find the plus-minus statistic for combinations of players by entering a character vector with the player names in the players argument.\n On/Off Statistics On/Off statistics for a player or a set of players measure team statistics when the player or players where on the court and when they were on the bench.\nYou can use getOnOffStats() to find on/off statistics. For instance, I can find out how Real Madrid did when Rudy and Ayón were together on the court versus when both were on the bench in the two games played in the 2018/2019 Final Four.\ngetOnOffStats(pbp = samplepbp, players = c(\u0026quot;FERNANDEZ, RUDY\u0026quot;, \u0026quot;AYON, GUSTAVO\u0026quot;)) ## # A tibble: 8 x 28 ## season game_code players on type team_code home fg2a fg2m fg2_pct ## \u0026lt;int\u0026gt; \u0026lt;int\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;lgl\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;lgl\u0026gt; \u0026lt;int\u0026gt; \u0026lt;int\u0026gt; \u0026lt;dbl\u0026gt; ## 1 2018 258 FERNAN… TRUE defe… CSK TRUE 5 1 0.2 ## 2 2018 258 FERNAN… TRUE offe… MAD FALSE 3 2 0.667 ## 3 2018 259 FERNAN… TRUE offe… MAD FALSE 20 14 0.7 ## 4 2018 259 FERNAN… TRUE defe… ULK TRUE 15 7 0.467 ## 5 2018 258 FERNAN… FALSE defe… CSK TRUE 33 16 0.485 ## 6 2018 258 FERNAN… FALSE offe… MAD FALSE 43 22 0.512 ## 7 2018 259 FERNAN… FALSE offe… MAD FALSE 15 9 0.6 ## 8 2018 259 FERNAN… FALSE defe… ULK TRUE 17 9 0.529 ## # … with 18 more variables: fg3a \u0026lt;int\u0026gt;, fg3m \u0026lt;int\u0026gt;, fg3_pct \u0026lt;dbl\u0026gt;, ## # fga \u0026lt;int\u0026gt;, fgm \u0026lt;int\u0026gt;, fg_pct \u0026lt;dbl\u0026gt;, fta \u0026lt;int\u0026gt;, ftm \u0026lt;int\u0026gt;, ## # ft_pct \u0026lt;dbl\u0026gt;, orb \u0026lt;int\u0026gt;, drb \u0026lt;int\u0026gt;, tov \u0026lt;int\u0026gt;, ast \u0026lt;int\u0026gt;, stl \u0026lt;int\u0026gt;, ## # cpf \u0026lt;int\u0026gt;, blk \u0026lt;int\u0026gt;, pts \u0026lt;dbl\u0026gt;, poss \u0026lt;dbl\u0026gt; Note that getOnOffStats() returns 4 rows per game corresponding to:\n Team statistics when players were on the court together.\n Opposing team statistics when players were on the court together.\n Team statistics when players were on the bench together.\n Opposing team statistics when players were on the bench together.\n   Assists patterns Play-by-play data allows us to find out who assists who on assisted baskets. The function getAssists() returns a data frame with the passer and the shooter (plus more contextual information) for all assisted baskets in the input play-by-play data.\nI am going to use getAssists() and some data wrangling to find out the most common assists in CSKA Moscow during the two games of the 2018/2019 Final Four:\nassists_csk \u0026lt;- getAssists(pbp = samplepbp, team = \u0026quot;CSK\u0026quot;) assists_csk %\u0026gt;% count(passer, shooter) %\u0026gt;% arrange(desc(n)) ## # A tibble: 25 x 3 ## passer shooter n ## \u0026lt;chr\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;int\u0026gt; ## 1 CLYBURN, WILL HIGGINS, CORY 2 ## 2 DE COLO, NANDO HACKETT, DANIEL 2 ## 3 HACKETT, DANIEL HUNTER, OTHELLO 2 ## 4 RODRIGUEZ, SERGIO HINES, KYLE 2 ## 5 CLYBURN, WILL DE COLO, NANDO 1 ## 6 DE COLO, NANDO CLYBURN, WILL 1 ## 7 DE COLO, NANDO HUNTER, OTHELLO 1 ## 8 DE COLO, NANDO KURBANOV, NIKITA 1 ## 9 DE COLO, NANDO PETERS, ALEC 1 ## 10 HACKETT, DANIEL CLYBURN, WILL 1 ## # … with 15 more rows   Analyzing shot location data Shot location data specifies the x and y coordinates of every jump shot taken during a game. This data can be useful for, say, identifying shooting location tenedencies on offense of a given player/team, showing what spots on the court a player is most effective at, or analyzing what type of shots a team allows its opponents.\nFor the following analysis, I am going to use the sampleshots dataset, which contains the shot location data for the four games in the 2018/2019 Final Four.\nglimpse(sampleshots) ## Observations: 490 ## Variables: 25 ## $ season \u0026lt;dbl\u0026gt; 2018, 2018, 2018, 2018, 2018, 2018, 2018, 2018, 20… ## $ game_code \u0026lt;int\u0026gt; 257, 257, 257, 257, 257, 257, 257, 257, 257, 257, … ## $ num_anot \u0026lt;int\u0026gt; 5, 6, 10, 14, 16, 18, 21, 25, 27, 30, 31, 33, 34, … ## $ team_code \u0026lt;chr\u0026gt; \u0026quot;ULK\u0026quot;, \u0026quot;IST\u0026quot;, \u0026quot;IST\u0026quot;, \u0026quot;ULK\u0026quot;, \u0026quot;IST\u0026quot;, \u0026quot;ULK\u0026quot;, \u0026quot;IST\u0026quot;, \u0026quot;… ## $ player_id \u0026lt;chr\u0026gt; \u0026quot;P001324\u0026quot;, \u0026quot;P003048\u0026quot;, \u0026quot;P003048\u0026quot;, \u0026quot;P005159\u0026quot;, \u0026quot;P0018… ## $ player_name \u0026lt;chr\u0026gt; \u0026quot;MUHAMMED, ALI\u0026quot;, \u0026quot;DUNSTON, BRYANT\u0026quot;, \u0026quot;DUNSTON, BRYA… ## $ action_id \u0026lt;chr\u0026gt; \u0026quot;2FGM\u0026quot;, \u0026quot;2FGA\u0026quot;, \u0026quot;2FGM\u0026quot;, \u0026quot;3FGM\u0026quot;, \u0026quot;2FGA\u0026quot;, \u0026quot;2FGA\u0026quot;, \u0026quot;2… ## $ action \u0026lt;chr\u0026gt; \u0026quot;Two Pointer\u0026quot;, \u0026quot;Missed Two Pointer\u0026quot;, \u0026quot;Two Pointer\u0026quot;… ## $ points \u0026lt;int\u0026gt; 2, 0, 2, 3, 0, 0, 0, 3, 0, 3, 0, 3, 3, 2, 2, 2, 0,… ## $ coord_x \u0026lt;dbl\u0026gt; 1.1428571, -0.3163265, -0.1836735, -5.9489796, 1.9… ## $ coord_y \u0026lt;dbl\u0026gt; 2.279082, 2.717857, 2.207653, 6.177041, 2.462755, … ## $ zone \u0026lt;chr\u0026gt; \u0026quot;C\u0026quot;, \u0026quot;B\u0026quot;, \u0026quot;B\u0026quot;, \u0026quot;H\u0026quot;, \u0026quot;C\u0026quot;, \u0026quot;C\u0026quot;, \u0026quot;B\u0026quot;, \u0026quot;H\u0026quot;, \u0026quot;G\u0026quot;, \u0026quot;I\u0026quot;, … ## $ fastbreak \u0026lt;lgl\u0026gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, T… ## $ second_chance \u0026lt;lgl\u0026gt; FALSE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FA… ## $ off_turnover \u0026lt;lgl\u0026gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, T… ## $ minute \u0026lt;int\u0026gt; 1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4, 4, 5, 5, 6, 6,… ## $ console \u0026lt;chr\u0026gt; \u0026quot;09:42\u0026quot;, \u0026quot;09:19\u0026quot;, \u0026quot;09:13\u0026quot;, \u0026quot;08:53\u0026quot;, \u0026quot;08:29\u0026quot;, \u0026quot;08:0… ## $ points_a \u0026lt;int\u0026gt; 2, 2, 2, 5, 5, 5, 5, 5, 5, 5, 5, 5, 8, 8, 10, 12, … ## $ points_b \u0026lt;int\u0026gt; 0, 0, 2, 2, 2, 2, 2, 5, 5, 8, 8, 11, 11, 13, 15, 1… ## $ utc \u0026lt;chr\u0026gt; \u0026quot;20190517160232\u0026quot;, \u0026quot;20190517160256\u0026quot;, \u0026quot;2019051716030… ## $ make \u0026lt;lgl\u0026gt; TRUE, FALSE, TRUE, TRUE, FALSE, FALSE, FALSE, TRUE… ## $ quarter \u0026lt;int\u0026gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,… ## $ seconds \u0026lt;dbl\u0026gt; 18, 41, 47, 67, 91, 117, 130, 146, 176, 185, 203, … ## $ team_code_a \u0026lt;chr\u0026gt; \u0026quot;ULK\u0026quot;, \u0026quot;ULK\u0026quot;, \u0026quot;ULK\u0026quot;, \u0026quot;ULK\u0026quot;, \u0026quot;ULK\u0026quot;, \u0026quot;ULK\u0026quot;, \u0026quot;ULK\u0026quot;, \u0026quot;… ## $ team_code_b \u0026lt;chr\u0026gt; \u0026quot;IST\u0026quot;, \u0026quot;IST\u0026quot;, \u0026quot;IST\u0026quot;, \u0026quot;IST\u0026quot;, \u0026quot;IST\u0026quot;, \u0026quot;IST\u0026quot;, \u0026quot;IST\u0026quot;, \u0026quot;… You can see in addition to the x-y coordinates, coord_x and coord_y, there are variables that give you more contextual information such as the player that took the shot, the time in the clock when the shot was taken or whether the shot was after an offensive rebound. These variables can help you filter specific shot types.\nThe function plotShotChart() allows you to show graphically where the shots were taken on the court and colored according to whether the shot went in (green) or not (red). The returned object is a ggplot object that we can customize with ggplot2 functions:\nplotShotchart(sampleshots) + labs(title = \u0026quot;Euroleague 2018/2019 Final Four\u0026quot;) + theme(legend.position = \u0026quot;bottom\u0026quot;)  ","date":1574899200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1574899200,"objectID":"4bddd5a04baca4d2fe8b1973721e4d5d","permalink":"/post/2019-11-28-introduction-to-eurolig/introduction-to-eurolig/","publishdate":"2019-11-28T00:00:00Z","relpermalink":"/post/2019-11-28-introduction-to-eurolig/introduction-to-eurolig/","section":"post","summary":"Brief introduction to the new version of the eurolig package for analyzing play-by-play and shot location data from the Euroleague","tags":["Basketball analytics","R"],"title":"Introduction to eurolig","type":"post"},{"authors":null,"categories":null,"content":"","date":1564610400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1564610400,"objectID":"63f97e9dd530b3f09b6d8a6ac9748851","permalink":"/project/eurolig/","publishdate":"2019-08-01T00:00:00+02:00","relpermalink":"/project/eurolig/","section":"project","summary":"R package for analyzing basketball data from the Euroleague","tags":["statistics","basketball analytics"],"title":"eurolig","type":"project"},{"authors":null,"categories":null,"content":"","date":1563573600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1563573600,"objectID":"baebb6d4e11a77d6b303180f549adc67","permalink":"/project/rfeb/","publishdate":"2019-07-20T00:00:00+02:00","relpermalink":"/project/rfeb/","section":"project","summary":"R package for analyzing basketball data from the Spanish Federation leagues","tags":["statistics","basketball analytics"],"title":"rfeb","type":"project"},{"authors":null,"categories":["English"],"content":"Introduction eurolig is an R package that I just created for obtaining and analyzing basketball data games from the Euroleague. In this post I show how to use the package to analyze different aspects of the way FC Barcelona passes the ball in this Euroleague 2018-2019. More specifically, we are interested in finding out:\nWhat type of shot each assist generates\n How many points are being generated by each assist\n Who assists who\n How to visualize the patterns of assists\n   eurolig The eurolig package is in its initial phase and still has many bugs. At the moment of writing, the package only provides tools to work with play-by-play data, but I hope to add the possibility to work with other types of data shuch as shot location data and regular boxscore stats.\nThe package can be installed from Github:\n# install.packages(\u0026quot;devtools\u0026quot;) devtools::install_github(\u0026quot;solmos/eurolig\u0026quot;) Note, however, that the package is in its experimental phase and there will be numerous changes as I keep developing it. Having said that, I encourage you to download the package and play around with it. If you detect a bug or think of useful feature, please let me know.\nYou can keep track of new features and releases in the NEWS.md file from the package repository.\n Analysis The play-by-play data allow us to answer many questions that cannot be answered with the regular boxscore data. In this case, we will use these type of data to answer the questions of interest that we introduced above.\nData extraction We can obtain the play-by-play data by entering the game code (or game codes) toguether with the starting year of the season we want into the extract_pbp() function.\nThe game code can be found in the URL of the game web page. For instance, the last game that FC Barcelona played in this Euroleague at the moment of writting was against Bayern Munich in the German city. The game URL is\nhttps://www.euroleague.net/main/results/showgame?gamecode=219\u0026amp;seasoncode=E2018\nWe see that the game code is 219. Entering this code together with the corresponding year in extract_pbp() we obtain the play-by-play data in a tidy data frame:\nlibrary(eurolig) game_pbp \u0026lt;- extract_pbp(game_code = 219, season = 2018) game_pbp ## # A tibble: 518 x 18 ## game_code play_number team_code player_name play_type time_remaining ## \u0026lt;fct\u0026gt; \u0026lt;int\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;chr\u0026gt; ## 1 219 2 \u0026lt;NA\u0026gt; \u0026lt;NA\u0026gt; BP 10:00 ## 2 219 3 MUN RADOSEVIC,… TPOFF 09:59 ## 3 219 4 BAR TOMIC, ANTE TPOFF 09:59 ## 4 219 5 BAR RIBAS, PAU 3FGM 09:37 ## 5 219 6 BAR TOMIC, ANTE AS 09:35 ## 6 219 7 MUN LUCIC, VLA… 2FGA 09:20 ## 7 219 8 BAR TOMIC, ANTE D 09:18 ## 8 219 10 BAR PANGOS, KE… 2FGA 08:58 ## 9 219 11 MUN LUCIC, VLA… D 08:55 ## 10 219 12 MUN JOVIC, STE… TO 08:34 ## # … with 508 more rows, and 12 more variables: quarter \u0026lt;fct\u0026gt;, ## # points_home \u0026lt;dbl\u0026gt;, points_away \u0026lt;dbl\u0026gt;, team_name \u0026lt;fct\u0026gt;, ## # player_id \u0026lt;fct\u0026gt;, player_dorsal \u0026lt;dbl\u0026gt;, play_info \u0026lt;chr\u0026gt;, seconds \u0026lt;dbl\u0026gt;, ## # home_team \u0026lt;fct\u0026gt;, away_team \u0026lt;fct\u0026gt;, home \u0026lt;lgl\u0026gt;, season \u0026lt;int\u0026gt; In the present analysis we want to analyze more than just one game. Specifically, we want to obtain all the games FC Barcelona has played in this ongoing Euroleague. Instead of searching around the Euroleague website for all the different game codes, we can just use the function extract_team_pbp(). With this function we just need to enter the three letter team code and the year we want to obtain the data for all the games that the team has played in the given season.\nLet’s proceed to download the data of the games that FC Barcelona has played so far (March 25, 2019):\npbp \u0026lt;- extract_team_pbp(team = \u0026quot;BAR\u0026quot;, season = 2018) Note that the process takes a relatively long time to return the final data frame. This in not a bug. The function is designed to be slow. The Euroleague’s API documentation asks to leave a few second between succesive requests.\n Analysis of assists To answer the diferent questions that we mentioned in the introduction we are going to use the function get_assists(). Entering the play-by-play data into this function we obtain a data frame with detailed information about each assist recorded in these games. This resulting data frame can be used to answer many interesting questions with just few lines of code.\nlibrary(dplyr) assists \u0026lt;- get_assists(pbp, team = \u0026quot;BAR\u0026quot;) assists ## # A tibble: 475 x 12 ## game_code season passer shooter shot_type points time_remaining quarter ## \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;fct\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;chr\u0026gt; \u0026lt;fct\u0026gt; ## 1 2 2018 HEURT… CLAVER… 2FG 1 09:43 1 ## 2 2 2018 CLAVE… TOMIC,… 2FG 2 08:39 1 ## 3 2 2018 HEURT… TOMIC,… 2FG 2 07:44 1 ## 4 2 2018 HEURT… SINGLE… 2FG 2 07:34 1 ## 5 2 2018 CLAVE… SINGLE… 2FG 3 03:19 1 ## 6 2 2018 ORIOL… SERAPH… 2FG 2 00:46 1 ## 7 2 2018 SERAP… KURIC,… 3FG 3 00:13 1 ## 8 2 2018 HEURT… ORIOLA… 2FG 2 07:08 2 ## 9 2 2018 HEURT… SERAPH… 2FG 2 04:58 2 ## 10 2 2018 BLAZI… PUSTOV… 2FG 2 01:17 2 ## # … with 465 more rows, and 4 more variables: seconds \u0026lt;int\u0026gt;, foul \u0026lt;lgl\u0026gt;, ## # and1 \u0026lt;dbl\u0026gt;, ftm \u0026lt;dbl\u0026gt; What type of shot each player generates when he assists a teamate? With the assists data frame we can find out what type of shot each assist leads to. An assists can lead to three point shot, a two point shot, a shooting foul (where at aleast one foul shot is made) or an and 1.\nIn this case, let’s say we are only interested in knowing whether the shot following an assist was a two or a three point shot. The FC Barcelona players with at least 10 assists total have distributed their assists as follows:\nassists %\u0026gt;% group_by(passer) %\u0026gt;% summarise( assists = n(), two_pointers = sum(shot_type == \u0026quot;2FG\u0026quot;, na.rm = TRUE), three_pointers = sum(shot_type == \u0026quot;3FG\u0026quot;, na.rm = TRUE), `3pt_ratio` = round(three_pointers / assists, 3) ) %\u0026gt;% arrange(desc(assists)) %\u0026gt;% filter(assists \u0026gt; 10)   passer assists two_pointers three_pointers 3pt_ratio    HEURTEL, THOMAS 138 101 37 0.268  PANGOS, KEVIN 92 55 36 0.391  TOMIC, ANTE 53 34 19 0.358  RIBAS, PAU 47 33 14 0.298  HANGA, ADAM 30 20 10 0.333  SINGLETON, CHRIS 26 15 11 0.423  CLAVER, VICTOR 23 12 11 0.478  KURIC, KYLE 21 13 8 0.381  ORIOLA, PIERRE 15 8 7 0.467  BLAZIC, JAKA 12 9 3 0.250  SERAPHIN, KEVIN 12 8 4 0.333    In this case, Heurtel has the second lowest ratio of assists to three pointers with respect total assists (0.268). On the other hand, Pangos has a substantially higher proportion of assists that lead to three pointers (0.391).\nIt’s the big and mobile players, like Claver, Singleton or Oriola, that have the highest proportion of assists going to three pointers.\n How many points each player’s assists generate? As we have seen, not all assists are created equal. An assist to a three pointer generates two more points than an assist that results in a shooting foul where the shooter only scores one foul shot.\nWith the following lines of code we can compute how many points each player’s assists generated:\nassists %\u0026gt;% group_by(passer) %\u0026gt;% summarise( assists = n(), points = sum(points, na.rm = TRUE), ppa = round(points / assists, 3) ) %\u0026gt;% arrange(desc(assists)) %\u0026gt;% filter(assists \u0026gt; 10)   passer assists points ppa    HEURTEL, THOMAS 138 311 2.254  PANGOS, KEVIN 92 215 2.337  TOMIC, ANTE 53 121 2.283  RIBAS, PAU 47 105 2.234  HANGA, ADAM 30 68 2.267  SINGLETON, CHRIS 26 63 2.423  CLAVER, VICTOR 23 58 2.522  KURIC, KYLE 21 48 2.286  ORIOLA, PIERRE 15 36 2.400  BLAZIC, JAKA 12 26 2.167  SERAPHIN, KEVIN 12 28 2.333    The last column of this data frame (ppa) tells us how many Points Per Assist each player from FC Barcelona generates (with at least 10 assists). We observe that Claver and Singleton generate the highest value per assist, indicating that a relatively high proportion of their assists lead to a three point shot.\n Who assists who? With play-by-play data, it is also possible to find out to whom each player’s assist go to. The ten most common combinations passer-shooter are shown below:\nassists %\u0026gt;% group_by(passer, shooter) %\u0026gt;% count() %\u0026gt;% arrange(desc(n)) %\u0026gt;% head(10)   passer shooter n    HEURTEL, THOMAS SERAPHIN, KEVIN 27  HEURTEL, THOMAS TOMIC, ANTE 24  PANGOS, KEVIN TOMIC, ANTE 22  HEURTEL, THOMAS ORIOLA, PIERRE 21  HEURTEL, THOMAS SINGLETON, CHRIS 17  PANGOS, KEVIN KURIC, KYLE 16  PANGOS, KEVIN SERAPHIN, KEVIN 15  TOMIC, ANTE SINGLETON, CHRIS 15  HEURTEL, THOMAS CLAVER, VICTOR 12  HEURTEL, THOMAS KURIC, KYLE 12    The five most common combination passer-shooter are all from point guard to big man. We see that Heurtel connects very well with the bigs in his team, specially the two centers, Seraphin and Tomic. This explains the low proportion of assists to three point shots that we observed before.\nHowever, in order to have a more accurate picture we would need to know how many minutes each combination was together on the floor. This information would allow us to identify potential improvements when deciding lineups.\n How to visualize assists It is possible to summarise some of the data that we obtained before using a heatmap showing the distribution of assists among the players of FC Barcelona. The function plot_heatmap() does just that:\nplot_heatmap(pbp, \u0026quot;BAR\u0026quot;) + ggplot2::labs( title = \u0026quot;FC Barcelona assist heatmap\u0026quot;, subtitle = \u0026quot;Euroleague 2018-2019 (first 28 games)\u0026quot;, x = \u0026quot;Shooter\u0026quot;, y = \u0026quot;Passer\u0026quot;) The vertical axis represents the passer while the horizontal axis represents the player that shoots after the pass. The diagonal contains the total number of assists for each player. The color indicates the number of assists that a given player gives to other player.\n   ","date":1553731200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1553731200,"objectID":"8e697aecadc4632e85753fa6e7f2c850","permalink":"/post/2019-03-28-eurolig/analisis-asistencia/","publishdate":"2019-03-28T00:00:00Z","relpermalink":"/post/2019-03-28-eurolig/analisis-asistencia/","section":"post","summary":"How to use the eurolig package to analyze the patterns in assists for FC Barcelona in this Euroleague season","tags":["Basketball","Basketball analytics","R"],"title":"Analyzing FC Barcelona's assists pattern","type":"post"},{"authors":null,"categories":["English"],"content":"Take a look at the following sequence of numbers:\n\\[0, 1, 3, 6, 2, 7, 13, 20, 12, 21, 11, 22, \\ldots\\]\nIf you have not seen it before, you probably will not be able to figure out the pattern in this sequence. It is the so called Recamán’s sequence, attributed to the Colombian mathematician Bernardo Recamán.\nDespite its apparent complexity, the rules that generate this sequence are quite simple. The best way to understand the generating algorithm is to draw the number line from 0 to, say, 7 to start:\nBasically, starting from \\(0\\), in each step we try to move left by a number of units equal to the step we are taking. If the number in which we land is to the left of zero or it has already appeared before in our sequence, instead of moving left we move right.\nThe writer Alex Bellos explains it much better in the following video of Numberphile:   Implementation in R For this blog post I have used R to generate and draw the Recamán sequence. In a few lines of code we can create a function that generates a given number of elements of this sequence:\n# Generate the first n numbers of the Recamán sequence get_recaman \u0026lt;- function(n) { recaman_seq \u0026lt;- numeric(n) for (i in 1:length(recaman_seq)) { candidate \u0026lt;- recaman_seq[i] - i if (candidate \u0026gt; 0 \u0026amp; !(candidate %in% recaman_seq)) { recaman_seq[i + 1] \u0026lt;- candidate } else recaman_seq[i + 1] \u0026lt;- recaman_seq[i] + i } recaman_seq \u0026lt;- recaman_seq[-length(recaman_seq)] recaman_seq } get_recaman(20) ## [1] 0 1 3 6 2 7 13 20 12 21 11 22 10 23 9 24 8 25 43 62 To draw the sequence we use semicircles that represent the jumps from one number to the other.\nYo can find the code to draw the sequence here.\n Exploring Recaman’s path Play around with the code and explore the sequence. Do you think that every integer eventually appears? It is conjectured that no, that there are holes along Recamán’s path.\n ","date":1550620800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1550620800,"objectID":"a24aee4c1e158260e57f79476647bd97","permalink":"/post/2019-02-20-la-secuencia-de-recaman/la-secuencia-de-recaman/","publishdate":"2019-02-20T00:00:00Z","relpermalink":"/post/2019-02-20-la-secuencia-de-recaman/la-secuencia-de-recaman/","section":"post","summary":"How to generate and plot the mysterious Recamán sequence with R","tags":["Mathematics","R","Generative art"],"title":"Recamán's sequence","type":"post"},{"authors":null,"categories":["English"],"content":"Kirk Goldsberry is one of the most popular figures in the basketball analytics world. He is known mainly for the use of shot charts in his analyses. Here there is an example with all the shots Lebron James has taken in his career:\nHappy Birthday, LeBron His constellation so far... pic.twitter.com/4HuCjTgl4x\n\u0026mdash; Kirk Goldsberry (@kirkgoldsberry) December 30, 2018  Shot charts can be useful for, say, identifying tenedencies on offense of a given player/team, showing what spots on the court a player is most effective at, or analyzing what type of shots a team allows its opponents.\nThe league that I play in, called LEB Oro, provides shot charts in its platform, Baloncesto en Vivo. For this blog post, I created an R package called rfeb, that allows us to easily scrape the shot coordinates provided by this website and plot the shot charts of the game or games we want.\nHaving said that, for some strange reason, the platform Baloncesto en Vivo does not provide any type of selection menu to access games played weeks before (or seasons before). Only the most recent games are visible.\nIt is possible to access previous games if you know the game id and adding it to the base url (http://baloncestoenvivo.feb.es/Game/). However, it appears as if the data gets erased as time goes by. At the moment of writting this post, only the games played before week 13 of this season are available.\nMoreover, the data themselves are a bit shaky. As I have come to find out, several gyms in the league produce shot charts that are obviously wrong.\nHuesca and Real Canoe are the main suspects. I found several cases but take a look at this game between ZTE Real Canoe and Cerramimbre Valladolid played at the gym of the former. According to the provided shot chart neither one of the two teams shot one shot inside the paint… Until these flagrant errors are eliminated, any analysis done with these data must be taken with a grain of salt.\nShot charts rfeb is an R package that I created to work with the data available in Baloncesto en Vivo. rfeb contains two main functions at the moment:\n extract_shots(): Scrapes the shot data of the specified game ids\n plot_shotchart(): Plots shot charts with these data\n  The rfeb package can be installed as follows:\n# install.packages(\u0026quot;devtools\u0026quot;) devtools::install_github(\u0026quot;solmos/rfeb\u0026quot;) You can check out the code of these functions in its Github repository. Note that even though I am going to extract data from my league (LEB Oro), it can also be used to work with the other leagues organized by the Spanish basketball federation (FEB).\nSo I am going to use rfeb to show how to plot shot charts with the data from the games played throughout the weekend of 01/11/2019.\nThe ids of these games go from 2010208 to 2010216. I use extract_shots() to scrape the shot data for these 9 games. We get a data frame where each row represents a shot taken, for which the following variables were recorded:\n t = Time elapsed since the start of the game\n x, y = Shot coordinates\n team = The team for which the player taking the shot plays\n player = Jersey number of the player that took the shot\n quarter = Quarter in which the shot was taken\n game = Game id\n made = Shot missed (0) or made (1)\n  library(rfeb) game_ids \u0026lt;- 2010208:2010216 shots \u0026lt;- extract_shots(game_ids) head(shots) ## t x y team player quarter game made ## 1 00:39 715.20 833.85 SÁENZ HORECA ARABERRI 3 1 2010208 Missed ## 2 00:47 824.20 245.25 LEYMA CORUÑA 22 1 2010208 Made ## 3 01:23 1069.45 485.05 LEYMA CORUÑA 4 1 2010208 Missed ## 4 01:35 628.00 523.20 SÁENZ HORECA ARABERRI 10 1 2010208 Missed ## 5 01:43 72.10 283.40 SÁENZ HORECA ARABERRI 3 1 2010208 Missed ## 6 01:48 687.95 207.10 LEYMA CORUÑA 1 1 2010208 Made Once we have the data, we can use plot_shotcharts(). This function uses ggplot2 to plot the shot chart and it is possible to specify the mapping arguments that we want for the geom_point() geom. For instance, we can color the points according to whether the shot was missed or made.\nBelow I show all the shots taken in these 9 games in one chart:\nplot_shotchart(shots, color = made) You probably do not want to show all the shots in one chart. It is possible to use other ggplot2 functions to adapt the plot to our needs. We can use, for instance, facet_wrap() to obtain a matrix of shotcharts with the different games:\nlibrary(ggplot2) plot_shotchart(shots, color = made) + facet_wrap(~ game) Lastly, I use dplyr to filter the shots that we want to show. Let’s say I want to see the shots I took in the game against Palencia played during the chosen week. The id for this game is 2010215 and I wear number 41:\nlibrary(dplyr) shots %\u0026gt;% filter(game == 2010215 \u0026amp; team == \u0026quot;COVIRAN GRANADA\u0026quot; \u0026amp; player == \u0026quot;41\u0026quot;) %\u0026gt;% plot_shotchart(color = made) + ggtitle(\u0026quot;Sergio Olmos vs. Palencia\u0026quot;) rfeb is still in development. My plan is to add more functionality to it so that not only shot data can be analyzed but regular stats or play-by-play data can be used as well. I will write more posts as I add more functions to the package.\n Resources  Web Scraping 201: finding the API\n Getting started with httr\n Drawing a basketball court with R\n   ","date":1548288000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1548288000,"objectID":"c46e871b11ae3701f9b852dfeee72d38","permalink":"/post/2019-01-24-graficos-de-tiro-con-r/shotcharts-with-r/","publishdate":"2019-01-24T00:00:00Z","relpermalink":"/post/2019-01-24-graficos-de-tiro-con-r/shotcharts-with-r/","section":"post","summary":"How to plot shot charts for games in LEB Oro using the rfeb package","tags":["R","Basketball"],"title":"rfeb: Shot charts with R","type":"post"},{"authors":null,"categories":["English"],"content":"I was reading about the Hidden beauty of multiplication tables and I thought it could be fun to make some of the cool plots in that article with R.\nAs I was trying to visualize new patterns in the multiplication table, I ended up with some useful fuctions that I decided to put in a simple R package called multable that you can install from GitHub.\nThe multiplication table Consider the standard \\(10 \\times 10\\) multiplication table, with the first row and the first column taking the values \\(1\\) through \\(10\\), forming a grid with the corresponding products.\nlibrary(tidyverse) # Data frame with all the values of the 10x10 multiplication table multiplication_table \u0026lt;- tibble( x = 1:10, y = 1:10 ) %\u0026gt;% # Get all combination of x and y complete(x, y) %\u0026gt;% # Get the product of all combinations mutate(product = x * y) ggplot(multiplication_table, aes(x, y)) + geom_tile(color = \u0026quot;white\u0026quot;) + geom_text(aes(label = product), color = \u0026quot;white\u0026quot;) + # We want the table to start with 1 in the upper-left corner scale_y_continuous(trans = \u0026quot;reverse\u0026quot;) + # We want to always display the tables as squares coord_fixed() + theme_void() For purposes that we will see next, I am going to add a row and a column of zeros above and to the left of our table, respectively:\nmultiplication_table \u0026lt;- tibble( x = 0:10, y = 0:10 ) %\u0026gt;% complete(x, y) %\u0026gt;% mutate(product = x * y) ggplot(multiplication_table, aes(x, y)) + geom_tile(color = \u0026quot;white\u0026quot;) + geom_text(aes(label = product), color = \u0026quot;white\u0026quot;) + scale_y_continuous(trans = \u0026quot;reverse\u0026quot;) + coord_fixed() + theme_void() Next, we will discover some beautiful symmetries by coloring the rectangles of the multiplication table that correspond to multiples of a number \\(k\\) for various values of \\(k\\).\n Single multiples We say that \\(c\\) is a multiple of \\(k\\) if \\(c = n k\\) for some integer \\(n\\), which is called the multiplier. So we can tell if a given number \\(c\\) is a multiple of \\(k\\) if the division \\(c\\) over \\(k\\) has remainder 0.\nLet’s begin with \\(k = 2\\). I am going to color the cells corresponding to multiples of \\(2\\) in one color and non-multiples of \\(2\\) in another color. Check out the pattern it emerges:\nlibrary(wesanderson) m2 \u0026lt;- multiplication_table %\u0026gt;% mutate(multiple_of_2 = product %% 2 == 0) # Color palette chosen from the wesanderson package colors \u0026lt;- wes_palette(name = \u0026quot;Zissou1\u0026quot;, n = 2) ggplot(m2, aes(x, y)) + geom_tile(aes(fill = multiple_of_2), color = \u0026quot;white\u0026quot;) + geom_text(aes(label = product), color = \u0026quot;white\u0026quot;) + scale_y_continuous(trans = \u0026quot;reverse\u0026quot;) + coord_fixed() + scale_fill_manual(values = colors, name = \u0026quot;Multiple of 2?\u0026quot;, labels = c(\u0026quot;No\u0026quot;, \u0026quot;Yes\u0026quot;)) + theme_void() If we look closely we can see that the whole pattern above can be pieced together using the following fundamental block:\nblock_2 \u0026lt;- tibble( x = c(0,1), y = c(0,1) ) %\u0026gt;% complete(x, y) %\u0026gt;% distinct() %\u0026gt;% mutate(product = x * y, multiple = product %% 2 == 0) ggplot(block_2, aes(x, y)) + geom_tile(aes(fill = multiple), color = \u0026quot;white\u0026quot;) + scale_y_continuous(trans = \u0026quot;reverse\u0026quot;) + scale_fill_manual(values = colors, guide = FALSE) + theme_void() As Zoheir Barka explains in his article mentioned at the beginning, the fundamental building block contains \\(k \\times k = 2 \\times 2 = 4\\) cells of the multiplication table. The fact that, in the case of a single multiple, each side of the fundamental building block is \\(k\\) can be useful when plotting our tables.\nWe want to explore the patterns for different values of \\(k\\) so I created a simple function that plots a colored multiplication table for the supplied \\(k\\) and the supplied dimensions. Multiples and non-multiples are colored the same way as before so I chose to drop the legend for aesthetic reasons.\n# Auxiliary function to create a data frame # with the values of the multiplication table create_mtable \u0026lt;- function(xmax, ymax) { data.frame( x = 0:xmax, y = 0:ymax ) %\u0026gt;% complete(x, y) %\u0026gt;% mutate(product = x * y) } # Plot the colored table draw_pattern \u0026lt;- function(k, xmax, ymax) { # Colors chosen from the Zissou1 palette in the wesanderson package colors \u0026lt;- wesanderson::wes_palette(name = \u0026quot;Zissou1\u0026quot;, n = 2) tab \u0026lt;- create_mtable(xmax, ymax) %\u0026gt;% mutate(multiple = product %% k == 0) %\u0026gt;% ggplot(aes(x, y)) + geom_tile(aes(fill = multiple), color = \u0026quot;white\u0026quot;) + geom_text(aes(label = product), color = \u0026quot;white\u0026quot;) + scale_y_continuous(trans = \u0026quot;reverse\u0026quot;) + coord_fixed() + scale_fill_manual(values = colors) + theme_void() + guides(fill = FALSE) tab } We can now easily plot the colored tables for different values of \\(k\\) and see what patterns emerge:\ndraw_pattern(k = 4, xmax = 4 * 3, ymax = 4 * 3) + labs(title = \u0026quot;Multiples of 4\u0026quot;) draw_pattern(6, 6 * 2, 6 * 2) + labs(title = \u0026quot;Multiples of 6\u0026quot;) Notice that we set the “length” of each side of the tables to multiples of \\(k\\) so that the pattern is symmetric.\n Multiple multiples We can plot more interesting (and beautiful) patterns if we use multiple multiples, and corresponding to them, multiple colors.\nConsider the multiples of \\(k_1 = 2\\) and \\(k_2 = 3\\). I will color each square of the multiplication table according to the following criteria:\n Not multiple of neither 2 nor 3\n Multiple only of 2\n Multiple only of 3\n Multiple of both 2 and 3\n  multiple_multiples \u0026lt;- tibble( x = 0:12, y = 0:12 ) %\u0026gt;% complete(x, y) %\u0026gt;% mutate(product = x * y, m2 = product %% 2 == 0, m3 = product %% 3 == 0, inter = interaction(m2, m3)) %\u0026gt;% mutate(interaction = recode_factor(inter, FALSE.FALSE = \u0026quot;Multple of neither\u0026quot;, TRUE.FALSE = \u0026quot;Multiple of 2\u0026quot;, FALSE.TRUE = \u0026quot;Multiple of 3\u0026quot;, TRUE.TRUE = \u0026quot;Multiple of both\u0026quot;)) ggplot(multiple_multiples, aes(x, y)) + geom_tile(aes(fill = interaction), color = \u0026quot;white\u0026quot;) + geom_text(aes(label = product), color = \u0026quot;white\u0026quot;) + scale_fill_brewer(palette = \u0026quot;Pastel1\u0026quot;, name = element_blank()) + scale_y_continuous(trans = \u0026quot;reverse\u0026quot;) + coord_fixed() + theme_void() Notice that I used a \\(12 \\times 12\\) table so that I got a symmetric pattern. I did this because I knew that the fundamental building block is given by the least common multiple of \\(2\\) and \\(3\\). That is, in this case the fundamental block consists of \\(6 \\times 6 = 36\\) little cells.\n multable package I have created a simple R package out of this idea of coloring the factors of different numbers, called multable. You can install it with\n# install.packages(\u0026quot;devtools\u0026quot;) devtools::install_github(\u0026quot;solmos/multable\u0026quot;) As of now, the package contains just two functions:\n create_table() generates a data frame with the grid values and identifies the factors for different values of k\n draw_pattern() plots the multiplication table coloring the different cells according to what value of k a given cell is a factor of\n  Check out the code for these functions here. My plan is to add more functionality to this package but you can actually do some pretty cool visualizations as it is.\n  ","date":1541462400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1541462400,"objectID":"07751ebac12398d79e1288c868fb2268","permalink":"/post/2018-11-06-multiplication-table/multiplication-table-with-r/","publishdate":"2018-11-06T00:00:00Z","relpermalink":"/post/2018-11-06-multiplication-table/multiplication-table-with-r/","section":"post","summary":"I show how to visualize the patterns that emerge in the multiplication table and present an R package I created for this purpose","tags":["R","Mathematics"],"title":"Exploring the multiplication table with R","type":"post"},{"authors":null,"categories":null,"content":" In this tutorial, I\u0026rsquo;ll share my top 10 tips for getting started with Academic:\nTip 1 \u0026hellip;\nTip 2 \u0026hellip;\n","date":1536444000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536444000,"objectID":"6a451186c775f5f0adb3a0416d0cb711","permalink":"/tutorial/example/","publishdate":"2018-09-09T00:00:00+02:00","relpermalink":"/tutorial/example/","section":"tutorial","summary":"In this tutorial, I\u0026rsquo;ll share my top 10 tips for getting started with Academic:\nTip 1 \u0026hellip;\nTip 2 \u0026hellip;","tags":null,"title":"Example Page","type":"docs"},{"authors":[],"categories":null,"content":"Click on the Slides button above to view the built-in slides feature.\n Slides can be added in a few ways:\n Create slides using Academic\u0026rsquo;s Slides feature and link using url_slides parameter in the front matter of the talk file Upload an existing slide deck to static/ and link using url_slides parameter in the front matter of the talk file Embed your slides (e.g. Google Slides) or presentation video on this page using shortcodes.  Further talk details can easily be added to this page using Markdown and $\\rm \\LaTeX$ math code.\n","date":1483225200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1483225200,"objectID":"96344c08df50a1b693cc40432115cbe3","permalink":"/talk/example/","publishdate":"2017-01-01T00:00:00+01:00","relpermalink":"/talk/example/","section":"talk","summary":"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis posuere tellus ac convallis placerat. Proin tincidunt magna sed ex sollicitudin condimentum. Sed ac faucibus dolor, scelerisque sollicitudin nisi. Cras purus urna, suscipit quis sapien eu, pulvinar tempor diam.","tags":[],"title":"Example Talk","type":"talk"},{"authors":null,"categories":null,"content":"","date":1461708000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1461708000,"objectID":"f3e2e8505a3f890c5ffe9840d37e8bb0","permalink":"/project/tfm/","publishdate":"2016-04-27T00:00:00+02:00","relpermalink":"/project/tfm/","section":"project","summary":"Analysis of clustered data using linear mixed models","tags":["statistics","linear mixed models","multilevel models","hierarchical models"],"title":"Master's thesis","type":"project"},{"authors":["GA Cushen"],"categories":null,"content":"More detail can easily be written here using Markdown and $\\rm \\LaTeX$ math code.\n","date":1441058400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1441058400,"objectID":"d77fa4a74076ffcd7ca6c21cfc27a4b2","permalink":"/publication/person-re-id/","publishdate":"2015-09-01T00:00:00+02:00","relpermalink":"/publication/person-re-id/","section":"publication","summary":"Person re-identification is a critical security task for recognizing a person across spatially disjoint sensors. Previous work can be computationally intensive and is mainly based on low-level cues extracted from RGB data and implemented on a PC for a fixed sensor network (such as traditional CCTV). We present a practical and efficient framework for mobile devices (such as smart phones and robots) where high-level semantic soft biometrics are extracted from RGB and depth data. By combining these cues, our approach attempts to provide robustness to noise, illumination, and minor variations in clothing. This mobile approach may be particularly useful for the identification of persons in areas ill-served by fixed sensors or for tasks where the sensor position and direction need to dynamically adapt to a target. Results on the BIWI dataset are preliminary but encouraging. Further evaluation and demonstration of the system will be available on our website.","tags":[],"title":"A Person Re-Identification System For Mobile Devices","type":"publication"},{"authors":["GA Cushen","MS Nixon"],"categories":null,"content":"More detail can easily be written here using Markdown and $\\rm \\LaTeX$ math code.\n","date":1372629600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1372629600,"objectID":"2b4d919e3cf73dfcd0063c88fe01cb00","permalink":"/publication/clothing-search/","publishdate":"2013-07-01T00:00:00+02:00","relpermalink":"/publication/clothing-search/","section":"publication","summary":"We present a mobile visual clothing search system whereby a smart phone user can either choose a social networking photo or take a new photo of a person wearing clothing of interest and search for similar clothing in a retail database. From the query image, the person is detected, clothing is segmented, and clothing features are extracted and quantized. The information is sent from the phone client to a server, where the feature vector of the query image is used to retrieve similar clothing products from online databases. The phone's GPS location is used to re-rank results by retail store location. State of the art work focuses primarily on the recognition of a diverse range of clothing offline and pays little attention to practical applications. Evaluated on a challenging dataset, the system is relatively fast and achieves promising results.","tags":[],"title":"Mobile visual clothing search","type":"publication"},{"authors":null,"categories":null,"content":" Welcome to Slides Academic\nFeatures  Efficiently write slides in Markdown 3-in-1: Create, Present, and Publish your slides Supports speaker notes Mobile friendly slides  Controls  Next: Right Arrow or Space Previous: Left Arrow Start: Home Finish: End Overview: Esc Speaker notes: S Fullscreen: F Zoom: Alt + Click PDF Export: E  Code Highlighting Inline code: variable\nCode block:\nporridge = \u0026quot;blueberry\u0026quot; if porridge == \u0026quot;blueberry\u0026quot;: print(\u0026quot;Eating...\u0026quot;)  Math In-line math: $x + y = z$\nBlock math:\n$$ f\\left( x \\right) = \\;\\frac{{2\\left( {x + 4} \\right)\\left( {x - 4} \\right)}}{{\\left( {x + 4} \\right)\\left( {x + 1} \\right)}} $$\nFragments Make content appear incrementally\n{{% fragment %}} One {{% /fragment %}} {{% fragment %}} **Two** {{% /fragment %}} {{% fragment %}} Three {{% /fragment %}}  Press Space to play!\nOne  Two  Three \nA fragment can accept two optional parameters:\n class: use a custom style (requires definition in custom CSS) weight: sets the order in which a fragment appears  Speaker Notes Add speaker notes to your presentation\n{{% speaker_note %}} - Only the speaker can read these notes - Press `S` key to view {{% /speaker_note %}}  Press the S key to view the speaker notes!\n Only the speaker can read these notes Press S key to view   Themes  black: Black background, white text, blue links (default) white: White background, black text, blue links league: Gray background, white text, blue links beige: Beige background, dark text, brown links sky: Blue background, thin dark text, blue links   night: Black background, thick white text, orange links serif: Cappuccino background, gray text, brown links simple: White background, black text, blue links solarized: Cream-colored background, dark green text, blue links  Custom Slide Customize the slide style and background\n{{\u0026lt; slide background-image=\u0026quot;/img/boards.jpg\u0026quot; \u0026gt;}} {{\u0026lt; slide background-color=\u0026quot;#0000FF\u0026quot; \u0026gt;}} {{\u0026lt; slide class=\u0026quot;my-style\u0026quot; \u0026gt;}}  Custom CSS Example Let\u0026rsquo;s make headers navy colored.\nCreate assets/css/reveal_custom.css with:\n.reveal section h1, .reveal section h2, .reveal section h3 { color: navy; }  Questions? Ask\nDocumentation\n","date":-62135596800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":-62135596800,"objectID":"c2915ec5da95791851caafdcba9664af","permalink":"/slides/example-slides/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/slides/example-slides/","section":"slides","summary":"Welcome to Slides Academic\nFeatures  Efficiently write slides in Markdown 3-in-1: Create, Present, and Publish your slides Supports speaker notes Mobile friendly slides  Controls  Next: Right Arrow or Space Previous: Left Arrow Start: Home Finish: End Overview: Esc Speaker notes: S Fullscreen: F Zoom: Alt + Click PDF Export: E  Code Highlighting Inline code: variable\nCode block:\nporridge = \u0026quot;blueberry\u0026quot; if porridge == \u0026quot;blueberry\u0026quot;: print(\u0026quot;Eating...\u0026quot;)  Math In-line math: $x + y = z$","tags":null,"title":"Slides","type":"slides"}]