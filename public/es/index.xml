<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Mínimos Cuadrados on Mínimos Cuadrados</title>
    <link>/es/</link>
    <description>Recent content in Mínimos Cuadrados on Mínimos Cuadrados</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>es</language>
    <copyright>&amp;copy; 2018</copyright>
    <lastBuildDate>Wed, 20 Apr 2016 00:00:00 +0200</lastBuildDate>
    <atom:link href="/es/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>La secuencia de Recamán</title>
      <link>/es/post/2019-02-20-la-secuencia-de-recaman/la-secuencia-de-recaman/</link>
      <pubDate>Wed, 20 Feb 2019 00:00:00 +0000</pubDate>
      
      <guid>/es/post/2019-02-20-la-secuencia-de-recaman/la-secuencia-de-recaman/</guid>
      <description>&lt;p&gt;Échale un ojo a la siguiente secuencia de números:&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;math display&#34;&gt;\[0, 1, 3, 6, 2, 7, 13, 20, 12, 21, 11, 22, \ldots\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Si no la has visto nunca, seguramente no consigas averiguar qué patrón sigue esta secuencia. Se trata de la llamada &lt;a href=&#34;https://oeis.org/A005132&#34;&gt;secuencia de Recamán&lt;/a&gt;, atribuída al matemático colombiano Bernardo Recamán.&lt;/p&gt;
&lt;p&gt;A pesar de su aparente complejidad, las reglas para generar esta secuencia son más bien sencillas. Lo mejor para comprender el algoritmo que genera esta secuencia es dibujar una línea que vaya desde 0 hasta, por ejemplo, 7 para empezar: &lt;img src=&#34;/post/2019-02-20-la-secuencia-de-recaman/index.es_files/figure-html/number%20line-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Básicamente se trata de, empezando desde el &lt;span class=&#34;math inline&#34;&gt;\(0\)&lt;/span&gt;, en cada paso intentamos ir hacia la izquierda un número de unidades igual al paso en el que nos encontramos. Si el número en el que caemos al ir a la izquierda está a la izquierda de &lt;span class=&#34;math inline&#34;&gt;\(0\)&lt;/span&gt; o ya ha aparecido en nuestra secuencia anteriormente, en lugar de ir a la izquierda vamos a la derecha.&lt;/p&gt;
&lt;p&gt;El escritor Alex Bellos lo explica mucho mejor en el siguiente vídeo de Numberphile: 
&lt;div style=&#34;position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe src=&#34;//www.youtube.com/embed/FGC5TdIiT9U&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;&#34; allowfullscreen title=&#34;YouTube Video&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;hr /&gt;
&lt;div id=&#34;implementacion-en-r&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Implementación en R&lt;/h2&gt;
&lt;p&gt;Para esta entrada he utilizado R para generar y dibujar la secuencia de Recamán. En unas pocas líneas de código podemos crear una función que genere un número determinado de elementos de esta secuencia:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Generar los primeros n números de la secuencia de Recamán
get_recaman &amp;lt;- function(n) {
    recaman_seq &amp;lt;- numeric(n)
    for (i in 1:length(recaman_seq)) {
        candidate &amp;lt;- recaman_seq[i] - i
        if (candidate &amp;gt; 0 &amp;amp; !(candidate %in% recaman_seq)) {
            recaman_seq[i + 1] &amp;lt;- candidate
        } else recaman_seq[i + 1] &amp;lt;- recaman_seq[i] + i
    }
    recaman_seq &amp;lt;- recaman_seq[-length(recaman_seq)]
    recaman_seq
}

get_recaman(20)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##  [1]  0  1  3  6  2  7 13 20 12 21 11 22 10 23  9 24  8 25 43 62&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Para dibujar la secuencia utilizamos semicírculos que representen los saltos de un número al otro.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-02-20-la-secuencia-de-recaman/index.es_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Puedes obtener el código para dibujar la secuencia &lt;a href=&#34;https://github.com/solmos/recaman-sequence&#34;&gt;aquí&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;explorando-el-camino-de-recaman&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Explorando el camino de Recamán&lt;/h2&gt;
&lt;p&gt;Juega con el código y explora la secuencia. ¿Crees que tarde o temprano aparecen todos los números enteros? Se conjetura que &lt;a href=&#34;https://oeis.org/A005132/a005132_1.txt&#34;&gt;no&lt;/a&gt;, que existen ciertos agujeros en el camino de Recamán.&lt;/p&gt;
&lt;p&gt;¿No hay algo &lt;a href=&#34;https://oeis.org/play?seq=A005132&#34;&gt;extraño&lt;/a&gt; en esta secuencia?&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-02-20-la-secuencia-de-recaman/index.es_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-02-20-la-secuencia-de-recaman/index.es_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-02-20-la-secuencia-de-recaman/index.es_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>rfeb: Gráficos de tiro con R</title>
      <link>/es/post/2019-01-24-graficos-de-tiro-con-r/shotcharts-with-r/</link>
      <pubDate>Thu, 24 Jan 2019 00:00:00 +0000</pubDate>
      
      <guid>/es/post/2019-01-24-graficos-de-tiro-con-r/shotcharts-with-r/</guid>
      <description>&lt;p&gt;Kirk Goldsberry es una de las figuras más destacadas en el mundo de la estadística avanzada en la NBA. Se le conoce principalmente por el uso de gráficos de tiro en sus análisis. Este es un ejemplo en el que se muestran todos los tiros que ha realizado Lebron James a lo largo de su carrera:&lt;/p&gt;
&lt;blockquote class=&#34;twitter-tweet&#34;&gt;&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;Happy Birthday, LeBron &lt;br&gt;His constellation so far... &lt;a href=&#34;https://t.co/4HuCjTgl4x&#34;&gt;pic.twitter.com/4HuCjTgl4x&lt;/a&gt;&lt;/p&gt;&amp;mdash; Kirk Goldsberry (@kirkgoldsberry) &lt;a href=&#34;https://twitter.com/kirkgoldsberry/status/1079446773956075526?ref_src=twsrc%5Etfw&#34;&gt;December 30, 2018&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;

&lt;p&gt;Los gráficos de tiro pueden ser útiles para, por ejemplo, identificar tendencias en ataque de un determinado jugador/equipo, mostrar en qué zonas del campo un jugador es más efectivo o analizar qué tipo de tiros un equipo permite al rival.&lt;/p&gt;
&lt;p&gt;La liga en la que juego, la &lt;a href=&#34;http://www.leboro.es/inicio.aspx&#34;&gt;LEB Oro&lt;/a&gt;, proporciona gráficos de tiro en la plataforma &lt;a href=&#34;http://baloncestoenvivo.feb.es/&#34;&gt;Baloncesto en Vivo&lt;/a&gt;. Para esta entrada he creado un paquete de R, &lt;a href=&#34;https://github.com/solmos/rfeb&#34;&gt;&lt;code&gt;rfeb&lt;/code&gt;&lt;/a&gt;, con el que poder extraer las coordenadas de los tiros de esta página web para luego obtener gráficos de tiro del partido o partidos que queramos.&lt;/p&gt;
&lt;p&gt;Dicho esto, por alguna extraña razón, la plataforma Baloncesto en Vivo no ofrece ningún menú de selección para acceder a las estadísticas de partidos de jornadas anteriores (o temporadas anteriores). Tan solo son visibles los partidos de la jornada más reciente.&lt;/p&gt;
&lt;p&gt;Es posible acceder a partidos anteriores sabiendo el identificador del partido y añadiéndolo a la url base (&lt;a href=&#34;http://baloncestoenvivo.feb.es/Game/&#34; class=&#34;uri&#34;&gt;http://baloncestoenvivo.feb.es/Game/&lt;/a&gt;). Sin embargo, al parecer se van eliminando los datos a medida que avanzan las jornadas. Según escribo esta entrada sólo es posible acceder a los partidos disputados después de la jornada 13 de esta temporada.&lt;/p&gt;
&lt;p&gt;Además de esta incomprensible limitación, la recogida de datos parece poco fiable. Según he podido comprobar, &lt;strong&gt;varias canchas de la competición producen gráficos de tiro que obviamente no son correctos&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Huesca y Real Canoe son los principales sospechosos. He encontrado varios casos pero mirad, por ejemplo, el &lt;a href=&#34;http://baloncestoenvivo.feb.es/Game/2010168#shotchart&#34;&gt;partido&lt;/a&gt; en la pista del ZTE Real Canoe donde según el gráfico de tiro no se hizo ningún tiro dentro de la zona por parte de ninguno de los dos equipos… Hasta que este tipo de errores no se eliminen, cualquier análisis con estos datos será de dudosa validez.&lt;/p&gt;
&lt;div id=&#34;graficos-de-tiro&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Gráficos de tiro&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;rfeb&lt;/code&gt; es un paquete de R que he creado para trabajar con datos disponibles en Baloncesto en Vivo. &lt;code&gt;rfeb&lt;/code&gt; contiene dos funciones principales:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;extract_shots()&lt;/code&gt;: Extrae los datos de tiro de Baloncesto en Vivo de los identificadores de partido que introducimos&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;plot_shotchart()&lt;/code&gt;: Crea gráficos de tiro con los datos que introducimos&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Puedes instalar &lt;code&gt;rfeb&lt;/code&gt; de la siguiente manera:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# install.packages(&amp;quot;devtools&amp;quot;)
devtools::install_github(&amp;quot;solmos/rfeb&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Puedes echarle un ojo al código de estas funciones &lt;a href=&#34;https://github.com/solmos/rfeb&#34;&gt;aquí&lt;/a&gt;. Nótese que aunque en este caso extraeré datos de la LEB Oro, también sería posible trabajar con datos de las otras competiciones FEB disponibles en Baloncesto en Vivo.&lt;/p&gt;
&lt;p&gt;A continuación voy a mostrar, utilizando &lt;code&gt;rfeb&lt;/code&gt;, cómo obtener gráficos de tiro de todos los partidos de la última jornada de la primera vuelta de la LEB Oro disputada el fin de semana del 11/01/2019.&lt;/p&gt;
&lt;p&gt;Los identificadores de los partidos en este caso van desde el 2010208 al 2010216. Usamos &lt;code&gt;extract_shots()&lt;/code&gt; para obtener los datos recogidos de los tiros que se hicieron en estos partidos. Obtenemos un data frame en el que cada fila representa un tiro, de los cuales se muestran las siguientes variables:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;t&lt;/code&gt; = Tiempo desde el comienzo del partido&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;x&lt;/code&gt;, &lt;code&gt;y&lt;/code&gt; = Coordenadas del tiro&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;team&lt;/code&gt; = Equipo del jugador que realizó el tiro&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;player&lt;/code&gt; = Dorsal del jugador que realizó el tiro&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;quarter&lt;/code&gt; = Cuarto en el que se realizó el tiro&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;game&lt;/code&gt; = Identificador del partido&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;made&lt;/code&gt; = Tiro fallado (Missed) o metido (Made)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(rfeb)
game_ids &amp;lt;- 2010208:2010216
shots &amp;lt;- extract_shots(game_ids)
head(shots)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##       t       x      y                  team player quarter    game   made
## 1 00:39  715.20 833.85 SÁENZ HORECA ARABERRI      3       1 2010208 Missed
## 2 00:47  824.20 245.25          LEYMA CORUÑA     22       1 2010208   Made
## 3 01:23 1069.45 485.05          LEYMA CORUÑA      4       1 2010208 Missed
## 4 01:35  628.00 523.20 SÁENZ HORECA ARABERRI     10       1 2010208 Missed
## 5 01:43   72.10 283.40 SÁENZ HORECA ARABERRI      3       1 2010208 Missed
## 6 01:48  687.95 207.10          LEYMA CORUÑA      1       1 2010208   Made&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Una vez tenemos los datos de los tiros, usamos la función &lt;code&gt;plot_shotchart()&lt;/code&gt; para visualizar el gráfico de tiro. La función usa &lt;code&gt;ggplot2&lt;/code&gt; para producir el gráfico y es posible especificar los argumentos que queremos para el &lt;em&gt;mapping&lt;/em&gt; de la función &lt;code&gt;geom_point()&lt;/code&gt;. Por ejemplo, podemos elegir el color de los puntos según fueron o no canasta.&lt;/p&gt;
&lt;p&gt;A continuación muestro todos los tiros de la jornada en un sólo gráfico:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot_shotchart(shots, color = made)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-01-24-graficos-de-tiro-con-r/index.es_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Seguramente no querramos mostrar todos los tiros. Es posible usar otras funciones de &lt;code&gt;ggplot2&lt;/code&gt; para adaptar el gráfico a nuestras necesidades. Por ejemplo, podemos usar &lt;code&gt;facet_wrap()&lt;/code&gt; para obtener una matriz de gráficos según el partido:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(ggplot2)
plot_shotchart(shots, color = made) + facet_wrap(~ game)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-01-24-graficos-de-tiro-con-r/index.es_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Por último, utilizaremos &lt;code&gt;dplyr&lt;/code&gt; para filtrar los tiros que queremos mostrar. Digamos que quiero ver qué tiros hice yo en el partido que disputé contra Palencia en esta jornada. Este partido se corresponde con el identificador &lt;code&gt;2010215&lt;/code&gt; y el número que llevo en mi camiseta es el &lt;code&gt;41&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(dplyr)
shots %&amp;gt;% 
    filter(game == 2010215 &amp;amp; team == &amp;quot;COVIRAN GRANADA&amp;quot; &amp;amp; player == &amp;quot;41&amp;quot;) %&amp;gt;%
    plot_shotchart(color = made) +
    ggtitle(&amp;quot;Sergio Olmos vs. Palencia&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2019-01-24-graficos-de-tiro-con-r/index.es_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;rfeb&lt;/code&gt; todavía está en proceso de desarrollo. Mi idea es ampliar la funcionalidad de este paquete para poder analizar no solo datos de tiro, sino también datos jugada-a-jugada. Escribiré más entradas en el blog a medida que vaya añadiendo más funciones al paquete.&lt;/p&gt;
&lt;hr /&gt;
&lt;/div&gt;
&lt;div id=&#34;recursos-adicionales&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Recursos adicionales&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://www.gregreda.com/2015/02/15/web-scraping-finding-the-api/&#34;&gt;Web Scraping 201: finding the API&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;%22https://cran.r-project.org/web/packages/httr/vignettes/quickstart.html%22&#34;&gt;Getting started with httr&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://egallic.fr/drawing-a-basketball-court-with-r/&#34;&gt;Drawing a basketball court with R&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Exploring the multiplication table with R</title>
      <link>/es/post/2018-11-06-multiplication-table/multiplication-table-with-r/</link>
      <pubDate>Tue, 06 Nov 2018 00:00:00 +0000</pubDate>
      
      <guid>/es/post/2018-11-06-multiplication-table/multiplication-table-with-r/</guid>
      <description>&lt;p&gt;I was reading about the &lt;a href=&#34;https://plus.maths.org/content/hidden-beauty-multiplication-tables&#34;&gt;Hidden beauty of multiplication tables&lt;/a&gt; and I thought it could be fun to make some of the cool plots in that article with R.&lt;/p&gt;
&lt;p&gt;As I was trying to visualize new patterns in the multiplication table, I ended up with some useful fuctions that I decided to put in a simple R package called &lt;code&gt;multable&lt;/code&gt; that you can install from &lt;a href=&#34;https://github.com/solmos/multable&#34;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;div id=&#34;the-multiplication-table&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;The multiplication table&lt;/h2&gt;
&lt;p&gt;Consider the standard &lt;span class=&#34;math inline&#34;&gt;\(10 \times 10\)&lt;/span&gt; multiplication table, with the first row and the first column taking the values &lt;span class=&#34;math inline&#34;&gt;\(1\)&lt;/span&gt; through &lt;span class=&#34;math inline&#34;&gt;\(10\)&lt;/span&gt;, forming a grid with the corresponding products.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse)

# Data frame with all the values of the 10x10 multiplication table
multiplication_table &amp;lt;- tibble(
    x = 1:10,
    y = 1:10
) %&amp;gt;% # Get all combination of x and y
    complete(x, y) %&amp;gt;% # Get the product of all combinations
    mutate(product = x * y)

ggplot(multiplication_table, aes(x, y)) +
    geom_tile(color = &amp;quot;white&amp;quot;) +
    geom_text(aes(label = product), color = &amp;quot;white&amp;quot;) +
    # We want the table to start with 1 in the upper-left corner
    scale_y_continuous(trans = &amp;quot;reverse&amp;quot;) +
    # We want to always display the tables as squares
    coord_fixed() +
    theme_void()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-06-multiplication-table/index.es_files/figure-html/unnamed-chunk-1-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;For purposes that we will see next, I am going to add a row and a column of zeros above and to the left of our table, respectively:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;multiplication_table &amp;lt;- tibble(
    x = 0:10,
    y = 0:10
) %&amp;gt;% 
    complete(x, y) %&amp;gt;% 
    mutate(product = x * y)
ggplot(multiplication_table, aes(x, y)) +
    geom_tile(color = &amp;quot;white&amp;quot;) +
    geom_text(aes(label = product), color = &amp;quot;white&amp;quot;) +
    scale_y_continuous(trans = &amp;quot;reverse&amp;quot;) +
    coord_fixed() +
    theme_void()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-06-multiplication-table/index.es_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Next, we will discover some beautiful symmetries by coloring the rectangles of the multiplication table that correspond to multiples of a number &lt;span class=&#34;math inline&#34;&gt;\(k\)&lt;/span&gt; for various values of &lt;span class=&#34;math inline&#34;&gt;\(k\)&lt;/span&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;single-multiples&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Single multiples&lt;/h2&gt;
&lt;p&gt;We say that &lt;span class=&#34;math inline&#34;&gt;\(c\)&lt;/span&gt; is a multiple of &lt;span class=&#34;math inline&#34;&gt;\(k\)&lt;/span&gt; if &lt;span class=&#34;math inline&#34;&gt;\(c = n k\)&lt;/span&gt; for some integer &lt;span class=&#34;math inline&#34;&gt;\(n\)&lt;/span&gt;, which is called the multiplier. So we can tell if a given number &lt;span class=&#34;math inline&#34;&gt;\(c\)&lt;/span&gt; is a multiple of &lt;span class=&#34;math inline&#34;&gt;\(k\)&lt;/span&gt; if the division &lt;span class=&#34;math inline&#34;&gt;\(c\)&lt;/span&gt; over &lt;span class=&#34;math inline&#34;&gt;\(k\)&lt;/span&gt; has remainder 0.&lt;/p&gt;
&lt;p&gt;Let’s begin with &lt;span class=&#34;math inline&#34;&gt;\(k = 2\)&lt;/span&gt;. I am going to color the cells corresponding to multiples of &lt;span class=&#34;math inline&#34;&gt;\(2\)&lt;/span&gt; in one color and non-multiples of &lt;span class=&#34;math inline&#34;&gt;\(2\)&lt;/span&gt; in another color. Check out the pattern it emerges:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(wesanderson)
m2 &amp;lt;- multiplication_table %&amp;gt;% 
    mutate(multiple_of_2 = product %% 2 == 0)
# Color palette chosen from the wesanderson package
colors &amp;lt;- wes_palette(name = &amp;quot;Zissou1&amp;quot;, n = 2)
ggplot(m2, aes(x, y)) +
    geom_tile(aes(fill = multiple_of_2), color = &amp;quot;white&amp;quot;) +
    geom_text(aes(label = product), color = &amp;quot;white&amp;quot;) +
    scale_y_continuous(trans = &amp;quot;reverse&amp;quot;) +
    coord_fixed() +
    scale_fill_manual(values = colors,
                      name = &amp;quot;Multiple of 2?&amp;quot;,
                      labels = c(&amp;quot;No&amp;quot;, &amp;quot;Yes&amp;quot;)) +
    theme_void()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-06-multiplication-table/index.es_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;If we look closely we can see that the whole pattern above can be pieced together using the following fundamental block:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;block_2 &amp;lt;- tibble(
    x = c(0,1),
    y = c(0,1)
) %&amp;gt;% 
    complete(x, y) %&amp;gt;% 
    distinct() %&amp;gt;% 
    mutate(product = x * y,
           multiple = product %% 2 == 0)
ggplot(block_2, aes(x, y)) +
    geom_tile(aes(fill = multiple), color = &amp;quot;white&amp;quot;) +
    scale_y_continuous(trans = &amp;quot;reverse&amp;quot;) +
    scale_fill_manual(values = colors,
                      guide = FALSE) +
    theme_void()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-06-multiplication-table/index.es_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;192&#34; /&gt;&lt;/p&gt;
&lt;p&gt;As Zoheir Barka explains in his article mentioned at the beginning, the fundamental building block contains &lt;span class=&#34;math inline&#34;&gt;\(k \times k = 2 \times 2 = 4\)&lt;/span&gt; cells of the multiplication table. The fact that, in the case of a single multiple, each side of the fundamental building block is &lt;span class=&#34;math inline&#34;&gt;\(k\)&lt;/span&gt; can be useful when plotting our tables.&lt;/p&gt;
&lt;p&gt;We want to explore the patterns for different values of &lt;span class=&#34;math inline&#34;&gt;\(k\)&lt;/span&gt; so I created a simple function that plots a colored multiplication table for the supplied &lt;span class=&#34;math inline&#34;&gt;\(k\)&lt;/span&gt; and the supplied dimensions. Multiples and non-multiples are colored the same way as before so I chose to drop the legend for aesthetic reasons.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# Auxiliary function to create a data frame 
# with the values of the multiplication table
create_mtable &amp;lt;- function(xmax, ymax) {
    data.frame(
        x = 0:xmax,
        y = 0:ymax
    ) %&amp;gt;% 
        complete(x, y) %&amp;gt;% 
        mutate(product = x * y)
}

# Plot the colored table
draw_pattern &amp;lt;- function(k, xmax, ymax) {
    # Colors chosen from the Zissou1 palette in the wesanderson package
    colors &amp;lt;- wesanderson::wes_palette(name = &amp;quot;Zissou1&amp;quot;, n = 2)
    tab &amp;lt;- create_mtable(xmax, ymax) %&amp;gt;% 
        mutate(multiple = product %% k == 0) %&amp;gt;% 
        ggplot(aes(x, y)) +
        geom_tile(aes(fill = multiple), color = &amp;quot;white&amp;quot;) +
        geom_text(aes(label = product), color = &amp;quot;white&amp;quot;) +
        scale_y_continuous(trans = &amp;quot;reverse&amp;quot;) +
        coord_fixed() +
        scale_fill_manual(values = colors) +
        theme_void() +
        guides(fill = FALSE)
    tab
}&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can now easily plot the colored tables for different values of &lt;span class=&#34;math inline&#34;&gt;\(k\)&lt;/span&gt; and see what patterns emerge:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;draw_pattern(k = 4, xmax = 4 * 3, ymax = 4 * 3) +
    labs(title = &amp;quot;Multiples of 4&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-06-multiplication-table/index.es_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;480&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;draw_pattern(6, 6 * 2, 6 * 2) +
    labs(title = &amp;quot;Multiples of 6&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-06-multiplication-table/index.es_files/figure-html/unnamed-chunk-6-2.png&#34; width=&#34;480&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Notice that we set the “length” of each side of the tables to multiples of &lt;span class=&#34;math inline&#34;&gt;\(k\)&lt;/span&gt; so that the pattern is symmetric.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;multiple-multiples&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Multiple multiples&lt;/h2&gt;
&lt;p&gt;We can plot more interesting (and beautiful) patterns if we use multiple multiples, and corresponding to them, multiple colors.&lt;/p&gt;
&lt;p&gt;Consider the multiples of &lt;span class=&#34;math inline&#34;&gt;\(k_1 = 2\)&lt;/span&gt; and &lt;span class=&#34;math inline&#34;&gt;\(k_2 = 3\)&lt;/span&gt;. I will color each square of the multiplication table according to the following criteria:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Not multiple of neither 2 nor 3&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Multiple only of 2&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Multiple only of 3&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Multiple of both 2 and 3&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;multiple_multiples &amp;lt;- tibble(
    x = 0:12,
    y = 0:12
) %&amp;gt;% 
    complete(x, y) %&amp;gt;% 
    mutate(product = x * y,
           m2 = product %% 2 == 0,
           m3 = product %% 3 == 0,
           inter = interaction(m2, m3)) %&amp;gt;% 
    mutate(interaction = recode_factor(inter,
                                       FALSE.FALSE = &amp;quot;Multple of neither&amp;quot;,
                                       TRUE.FALSE = &amp;quot;Multiple of 2&amp;quot;,
                                       FALSE.TRUE = &amp;quot;Multiple of 3&amp;quot;,
                                       TRUE.TRUE = &amp;quot;Multiple of both&amp;quot;))
ggplot(multiple_multiples, aes(x, y)) +
    geom_tile(aes(fill = interaction), color = &amp;quot;white&amp;quot;) +
    geom_text(aes(label = product), color = &amp;quot;white&amp;quot;) +
    scale_fill_brewer(palette = &amp;quot;Pastel1&amp;quot;,
                      name = element_blank()) +
    scale_y_continuous(trans = &amp;quot;reverse&amp;quot;) +
    coord_fixed() +
    theme_void()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/post/2018-11-06-multiplication-table/index.es_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Notice that I used a &lt;span class=&#34;math inline&#34;&gt;\(12 \times 12\)&lt;/span&gt; table so that I got a symmetric pattern. I did this because I knew that the fundamental building block is given by the least common multiple of &lt;span class=&#34;math inline&#34;&gt;\(2\)&lt;/span&gt; and &lt;span class=&#34;math inline&#34;&gt;\(3\)&lt;/span&gt;. That is, in this case the fundamental block consists of &lt;span class=&#34;math inline&#34;&gt;\(6 \times 6 = 36\)&lt;/span&gt; little cells.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;multable-package&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;multable package&lt;/h2&gt;
&lt;p&gt;I have created a simple R package out of this idea of coloring the factors of different numbers, called &lt;code&gt;multable&lt;/code&gt;. You can install it with&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# install.packages(&amp;quot;devtools&amp;quot;)
devtools::install_github(&amp;quot;solmos/multable&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As of now, the package contains just two functions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;create_table()&lt;/code&gt; generates a data frame with the grid values and identifies the factors for different values of &lt;code&gt;k&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;draw_pattern()&lt;/code&gt; plots the multiplication table coloring the different cells according to what value of &lt;code&gt;k&lt;/code&gt; a given cell is a factor of&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Check out the code for these functions &lt;a href=&#34;https://github.com/solmos/multable&#34;&gt;here&lt;/a&gt;. My plan is to add more functionality to this package but you can actually do some pretty cool visualizations as it is.&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;multiple_tables.png&#34; /&gt;

&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Analysis of clustered data using linear mixed models</title>
      <link>/es/project/tfm/</link>
      <pubDate>Wed, 27 Apr 2016 00:00:00 +0200</pubDate>
      
      <guid>/es/project/tfm/</guid>
      <description></description>
    </item>
    
  </channel>
</rss>
